(function(b){var a=new Class({$events:null,init:function(){this.$events={};},on:function(c,d){this.$events[c]=this.$events[c]||[];this.$events[c].push(d);},fire:function(c,g){var f=this.$events[c];if(f){for(var d in f){var e=f[d];e.apply(this,[g]);}}},detach:function(c,f){var e=this.$events[c];for(var d=0;d<e.length;d++){if(e[d]==f){delete e[d];return;}}return;}});b.EventManager=a;}(AR));(function(b){var a=b.EventManager.extend({init:function(){this._parent();},onMessage:function(d,c){b.dispatcher.on(d,b.bind(c,this));},sendMessage:function(d,c){b.dispatcher.fire(d,c);}});b.MsgManager=a;b.dispatcher=new a();}(AR));(function(b){var a=null;var d=".page";var c=b.EventManager.extend({tableName:"",filters:[],rowCount:20,cluster:null,showLoading:false,tables:[],init:function(e){if(a){throw new Error("You can only create one instance of DataManager!");}this._parent();}});c.getInstance=function(){if(a){return a;}a=new c();return a;};b.DataManager=c;}(AR));(function(a){var b=a.MsgManager.extend({app:null,mustache:null,templates:null,init:function(c){this.mustache=a.mustache;this.templates=c.templates;this.container=c.container;this.hideOnStates=c.hideOnStates||[];this.formatRenderData=c.formatRenderData;this.dataManager=a.DataManager.getInstance();this.events=a.extend(this.events||{},c.events||{});this.parseEvents();this.register();},register:function(){},render:function(){},parseEvents:function(){var e=this.events||{};for(var c in e){for(var d in e[c]){var f=this[e[c][d]]||e[c][d];a.delegate(this.container,c,d,a.bind(f,this));}}},getDictionary:function(){return a.LanguageManager.getInstance().dictionary;}});a.View=b;}(AR));(function(a){var b=a.View.extend({base:"images/albums/default/",count:8,events:{".slide":{mouseenter:"onSlideMouseEnter",mouseleave:"onSlideMouseLeave"},},init:function(c){this.base=c.base||this.base;this.count=c.count||this.count;this._parent(c);},register:function(){},render:function(){var c=this.generatePicturesUrl();this.container.innerHTML=this.mustache(this.templates.main,{pictures:c});this.configure();return this;},configure:function(){},generatePicturesUrl:function(){var c=[];for(var d=0;d<this.count;d++){c.push({url:this.base+d+".jpg"});}return c;},onSlideMouseEnter:function(c){var d=a.all(".arrow");for(var e=0;e<d.length;e++){a.fadeToggle(d[e],"fast","linear");}},onSlideMouseLeave:function(c){var d=a.all(".arrow");for(var e=0;e<d.length;e++){a.fadeToggle(d[e],"fast","linear");}},});a.GalleryView=b;}(AR));(function(b){var a=b.View.extend({events:{},init:function(c){this._parent(c);},register:function(){},render:function(){this.container.innerHTML=this.mustache(this.templates.main,{});return this;},});b.MapView=a;}(AR));(function(a){var b=a.MsgManager.extend({views:[],state:null,lastState:null,init:function(c){this._parent();this.state=c.state;this.language=c.language;this.addViews(c.views||[]);this.appReady=c.appReady;this.register();a.DataManager.getInstance().app=this;},addView:function(c){if(!c){return;}c.app=this;if(this.views.indexOf(c)==-1){this.views.push(c);}},addViews:function(c){for(var d=0;d<c.length;d++){this.addView(c[d]);}},removeView:function(c){},register:function(){this.onMessage("changeState",this.onChangeState);this.onMessage("reverseState",this.onReverseState);},start:function(){if(this.language){a.LanguageManager.getInstance().loadLanguage(this.language,a.bind(function(){this._start();},this));}else{this._start();}},_start:function(){for(var c=0;c<this.views.length;c++){this.views[c].render();}this.changeState(this.state||"home");if(this.appReady){this.appReady.call(this,[]);}},changeState:function(e){if(e==this.state&&this.lastState!=null){return;}this.lastState=this.state;this.state=e;for(var d=0;d<this.views.length;d++){var c=this.views[d];if(c.hideOnStates.indexOf(this.state)!=-1){this.hideView(c);}else{this.showView(c);}}this.sendMessage("stateChanged",{currentState:this.state,lastState:this.lastState});},hideView:function(c){a.addClass(c.container,"hide-view");this.sendMessage("hideView",c.container);},showView:function(c){a.removeClass(c.container,"hide-view");this.sendMessage("showView",c.container);},onChangeState:function(c){this.changeState(c.state);},onReverseState:function(c){this.changeState(this.lastState);}});a.App=b;a.App.States={};a.App.States.GALLERY="gallery";a.App.States.MAP="map";}(AR));