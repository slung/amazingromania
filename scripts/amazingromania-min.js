(function(b){var a=new Class({$events:null,init:function(){this.$events={};},on:function(c,d){this.$events[c]=this.$events[c]||[];this.$events[c].push(d);},fire:function(c,g){var f=this.$events[c];if(f){for(var d in f){var e=f[d];e.apply(this,[g]);}}},detach:function(c,f){var e=this.$events[c];for(var d=0;d<e.length;d++){if(e[d]==f){delete e[d];return;}}return;}});b.EventManager=a;}(AR));(function(b){var a=b.EventManager.extend({init:function(){this._parent();},onMessage:function(d,c){b.dispatcher.on(d,b.bind(c,this));},sendMessage:function(d,c){b.dispatcher.fire(d,c);}});b.MsgManager=a;b.dispatcher=new a();}(AR));(function(b){var a=null;var d=".page";var c=b.EventManager.extend({tableName:"",filters:[],rowCount:20,cluster:null,showLoading:false,tables:[],init:function(e){if(a){throw new Error("You can only create one instance of DataManager!");}this._parent();}});c.getInstance=function(){if(a){return a;}a=new c();return a;};b.DataManager=c;}(AR));(function(a){var b=a.MsgManager.extend({app:null,mustache:null,templates:null,init:function(c){this.mustache=a.mustache;this.templates=c.templates;this.container=c.container;this.hideOnStates=c.hideOnStates||[];this.formatRenderData=c.formatRenderData;this.dataManager=a.DataManager.getInstance();this.events=a.extend(this.events||{},c.events||{});this.parseEvents();this.register();},register:function(){},render:function(){},parseEvents:function(){var e=this.events||{};for(var c in e){for(var d in e[c]){var f=this[e[c][d]]||e[c][d];a.delegate(this.container,c,d,a.bind(f,this));}}},getDictionary:function(){return a.LanguageManager.getInstance().dictionary;}});a.View=b;}(AR));(function(a){var b=a.View.extend({base:"images/albums/default/",count:8,prefix:"",extension:"jpg",startIndex:0,events:{"#gallery-container":{mouseenter:"onSlideMouseEnter",mouseleave:"onSlideMouseLeave"},},init:function(c){this.base=c.base||this.base;this.count=c.count||this.count;this.prefix=c.prefix||this.prefix;this.extension=c.extension||this.extension;this.startIndex=c.startIndex||this.startIndex;this._parent(c);},register:function(){},render:function(){var c=this.generatePicturesUrl();this.container.innerHTML=this.mustache(this.templates.main,{pictures:c});this.configure();return this;},configure:function(){},generatePicturesUrl:function(){var c=[];for(var d=this.startIndex;d<this.count;d++){c.push({url:this.base+this.prefix+d+"."+this.extension});}return c;},onSlideMouseEnter:function(c){var d=a.all(".arrow");if(!d){return;}for(var e=0;e<d.length;e++){a.fadeToggle(d[e],"fast","linear");}},onSlideMouseLeave:function(c){var d=a.all(".arrow");if(!d){return;}for(var e=0;e<d.length;e++){a.fadeToggle(d[e],"fast","linear");}},});a.GalleryView=b;}(AR));(function(b){var a=b.View.extend({map:null,events:{},init:function(c){this._parent(c);},register:function(){this.onMessage("showView",this.onShowView);},render:function(){var c={zoom:7,center:new google.maps.LatLng(48.5,20),mapTypeId:google.maps.MapTypeId.HYBRID,mapTypeControl:true,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_RIGHT},panControl:true,zoomControl:true,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE},};this.map=new google.maps.Map(this.container,c);return this;},drawRegion:function(e){var d=new google.maps.LatLng(46.16,24.13);var c=150000;this.transylvaniaRegion=new google.maps.Circle({center:d,radius:c,strokeColor:"#81B23C",strokeOpacity:0.8,strokeWeight:2,fillColor:"#81B23C",fillOpacity:0.2});this.transylvaniaRegion.setMap(this.map);google.maps.event.addListener(this.transylvaniaRegion,"mouseover",b.bind(function(){this.transylvaniaRegion.strokeWeight=5;this.transylvaniaRegion.setMap(this.map);},this));google.maps.event.addListener(this.transylvaniaRegion,"mouseout",b.bind(function(){this.transylvaniaRegion.strokeWeight=2;this.transylvaniaRegion.setMap(this.map);},this));},onShowView:function(c){if(c.id!=this.container.id){return;}google.maps.event.trigger(this.map,"resize");this.drawRegion();}});b.MapView=a;}(AR));(function(b){var a=b.View.extend({events:{".menu-item":{click:"onMenuItemClick"}},init:function(c){this._parent(c);},register:function(){},render:function(){this.container.innerHTML=this.mustache(this.templates.main,{});return this;},onMenuItemClick:function(c){var d=c.currentTarget.id;switch(d){case"home":this.sendMessage("changeState",{state:b.App.States.GALLERY});break;case"map":this.sendMessage("changeState",{state:b.App.States.MAP});break;case"places":this.sendMessage("changeState",{state:b.App.States.PLACES});break;case"tours":this.sendMessage("changeState",{state:b.App.States.TOURS});break;case"contact":this.sendMessage("changeState",{state:b.App.States.CONTACT});break;}}});b.MenuView=a;}(AR));(function(a){var b=a.MsgManager.extend({views:[],state:null,lastState:null,init:function(c){this._parent();this.state=c.state;this.language=c.language;this.addViews(c.views||[]);this.appReady=c.appReady;this.register();a.DataManager.getInstance().app=this;},addView:function(c){if(!c){return;}c.app=this;if(this.views.indexOf(c)==-1){this.views.push(c);}},addViews:function(c){for(var d=0;d<c.length;d++){this.addView(c[d]);}},removeView:function(c){},register:function(){this.onMessage("changeState",this.onChangeState);this.onMessage("reverseState",this.onReverseState);},start:function(){if(this.language){a.LanguageManager.getInstance().loadLanguage(this.language,a.bind(function(){this._start();},this));}else{this._start();}},_start:function(){for(var c=0;c<this.views.length;c++){this.views[c].render();}this.changeState(this.state||"home");if(this.appReady){this.appReady.call(this,[]);}},changeState:function(e){if(e==this.state&&this.lastState!=null){return;}this.lastState=this.state;this.state=e;for(var d=0;d<this.views.length;d++){var c=this.views[d];if(c.hideOnStates.indexOf(this.state)!=-1){this.hideView(c);}else{this.showView(c);}}this.sendMessage("stateChanged",{currentState:this.state,lastState:this.lastState});},hideView:function(c){a.addClass(c.container,"hide-view");
this.sendMessage("hideView",c.container);},showView:function(c){a.removeClass(c.container,"hide-view");this.sendMessage("showView",c.container);},onChangeState:function(c){this.changeState(c.state);},onReverseState:function(c){this.changeState(this.lastState);}});a.App=b;a.App.States={};a.App.States.GALLERY="gallery";a.App.States.MAP="map";a.App.States.PLACES="places";a.App.States.TOURS="tours";a.App.States.CONTACT="contact";}(AR));